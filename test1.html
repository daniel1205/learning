<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hang Out Starter - Unit 3b å–®å­—ç·´ç¿’</title>
    <style>
        :root {
            --primary: #06d6a0;       /* æ¸…æ–°çš„ç¶ è‰² */
            --primary-dark: #05b586;
            --secondary: #118ab2;     /* è—è‰² */
            --accent: #ef476f;        /* ç´…è‰²å¼·èª¿ */
            --bg: #f8f9fa;
            --card-bg: #ffffff;
            --text: #073b4c;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }

        h1 {
            color: var(--secondary);
            margin-bottom: 10px;
            text-shadow: 1px 1px 0 #ddd;
        }

        .subtitle {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 20px;
        }

        /* é¸å–®æŒ‰éˆ• */
        .menu {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 12px 25px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            background: white;
            color: #555;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
            font-weight: bold;
            border: 2px solid transparent;
        }

        .btn:hover { transform: translateY(-2px); }
        .btn.active {
            background-color: var(--primary);
            color: white;
            box-shadow: 0 6px 12px rgba(6, 214, 160, 0.3);
        }

        /* å…§å®¹å€åŸŸ */
        #app-container {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }

        /* å–®å­—å¡æ¨¡å¼ */
        .flashcard {
            background: var(--card-bg);
            width: 160px;
            height: 220px;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.2s;
            border-bottom: 5px solid var(--primary);
            position: relative;
        }

        .flashcard:hover { transform: scale(1.05); }
        
        .card-id {
            position: absolute; top: 10px; left: 15px;
            font-size: 1.2rem; color: #ddd; font-weight: bold;
        }

        .emoji-icon { font-size: 4.5rem; margin-bottom: 15px; }
        .word-text { font-size: 1.6rem; font-weight: bold; color: var(--text); }

        /* å¥å­å¡«ç©ºæ¨¡å¼ */
        .sentence-strip {
            background: white;
            width: 100%;
            max-width: 700px;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            cursor: pointer;
            border-left: 8px solid var(--secondary);
            transition: background 0.2s;
        }

        .sentence-strip:hover { background: #eefbfb; }

        .s-icon { font-size: 3rem; min-width: 60px; text-align: center; }
        .s-text { font-size: 1.4rem; line-height: 1.5; flex-grow: 1; }

        /* æ¨¡æ“¬æ‰‹å¯«å¡«ç©ºçš„æ•ˆæœ */
        .blank-space {
            display: inline-block;
            min-width: 80px;
            border-bottom: 3px solid var(--text);
            color: transparent;
            text-align: center;
            cursor: pointer;
            padding: 0 5px;
            transition: color 0.3s;
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif; /* æ‰‹å¯«é¢¨æ ¼ */
        }

        .blank-space.revealed {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        /* éŠæˆ²æ¨¡å¼ */
        #game-panel {
            background: white;
            padding: 40px;
            border-radius: 30px;
            text-align: center;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 600px;
        }

        #game-instruction { font-size: 1.5rem; margin-bottom: 30px; color: #555; }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .option-btn {
            font-size: 4rem;
            background: #f0f4f8;
            border: 3px solid transparent;
            border-radius: 20px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-btn:hover { background: #e2e8f0; transform: scale(1.05); }
        
        .correct-anim { background: #d1fae5 !important; border-color: #06d6a0 !important; animation: bounce 0.5s; }
        .wrong-anim { background: #fee2e2 !important; animation: shake 0.4s; }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* æ‰‹æ©Ÿé©é… */
        @media (max-width: 600px) {
            .flashcard { width: 45%; height: 180px; }
            .emoji-icon { font-size: 3.5rem; }
            .word-text { font-size: 1.3rem; }
            .s-text { font-size: 1.1rem; }
            .s-icon { font-size: 2.5rem; min-width: 50px; }
        }
    </style>
</head>
<body>

    <h1>ğŸ¤– å–®å­—ç‰¹è¨“ Hang Out 3b</h1>
    <div class="subtitle">é»æ“Šå¡ç‰‡è½ç™¼éŸ³ï¼Œé»æ“Šåº•ç·šçœ‹ç­”æ¡ˆ</div>

    <div class="menu">
        <button class="btn active" onclick="changeMode('cards')">ğŸ”¤ èªè­˜å–®å­—</button>
        <button class="btn" onclick="changeMode('sentences')">ğŸ“ å¥å­å¡«ç©º</button>
        <button class="btn" onclick="changeMode('game')">ğŸ® è½åŠ›å¤§æŒ‘æˆ°</button>
    </div>

    <div id="app-container"></div>

    <script>
        // è³‡æ–™åº«ï¼šå®Œå…¨å°ç…§åœ–ç‰‡å…§å®¹
        // Igloo æ²’æœ‰æ¨™æº– Emojiï¼Œä½¿ç”¨ â„ï¸ğŸ  (å†°å±‹) çµ„åˆä»£æ›¿
        const vocabList = [
            { id: 1, word: "robot", plural: "Robots", emoji: "ğŸ¤–", sentence: "{Robots} can do many things that people can't." },
            { id: 2, word: "balloon", plural: "balloons", emoji: "ğŸˆ", sentence: "There are many {balloons} at my birthday party." },
            { id: 3, word: "doll", plural: "doll", emoji: "ğŸ§¸", sentence: "Barbie is a toy {doll}." },
            { id: 4, word: "plane", plural: "planes", emoji: "âœˆï¸", sentence: "Pilots fly {planes}." },
            { id: 5, word: "train", plural: "train", emoji: "ğŸš‚", sentence: "This is a long {train}." },
            { id: 6, word: "monster", plural: "monster", emoji: "ğŸ‘¾", sentence: "This {monster} has an eye and 4 arms." },
            { id: 7, word: "room", plural: "room", emoji: "ğŸ›ï¸", sentence: "My {room} is clean and neat." },
            { id: 8, word: "gorilla", plural: "Gorillas", emoji: "ğŸ¦", sentence: "{Gorillas} are big and strong." },
            { id: 9, word: "iguana", plural: "Iguanas", emoji: "ğŸ¦", sentence: "{Iguanas} live in hot places." },
            { id: 10, word: "igloo", plural: "Igloos", emoji: "â„ï¸ğŸ ", sentence: "{Igloos} are a type of shelter built from snow." }
        ];

        const container = document.getElementById('app-container');
        let currentMode = 'cards';

        // èªéŸ³åˆæˆ
        function speak(text) {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.85; // ç¨å¾®æ”¾æ…¢èªé€Ÿ
            window.speechSynthesis.speak(utterance);
        }

        function changeMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            render();
        }

        function render() {
            container.innerHTML = '';
            if (currentMode === 'cards') renderCards();
            else if (currentMode === 'sentences') renderSentences();
            else if (currentMode === 'game') renderGame();
        }

        // 1. å–®å­—å¡æ¨¡å¼
        function renderCards() {
            vocabList.forEach(item => {
                const card = document.createElement('div');
                card.className = 'flashcard';
                card.innerHTML = `
                    <div class="card-id">${item.id}</div>
                    <div class="emoji-icon">${item.emoji}</div>
                    <div class="word-text">${item.word}</div>
                `;
                card.onclick = () => {
                    speak(item.word);
                    // ç°¡å–®å‹•ç•«
                    card.style.transform = "scale(0.95)";
                    setTimeout(()=> card.style.transform = "scale(1.05)", 100);
                    setTimeout(()=> card.style.transform = "scale(1)", 200);
                };
                container.appendChild(card);
            });
        }

        // 2. å¥å­å¡«ç©ºæ¨¡å¼
        function renderSentences() {
            vocabList.forEach(item => {
                // å°‡ {word} æ›¿æ›æˆ HTML åº•ç·šå…ƒç´ 
                // é€™è£¡è™•ç†äº†å–®è¤‡æ•¸ï¼Œé¡¯ç¤ºæ‹¬è™Ÿå…§çš„å­—
                const parts = item.sentence.split(/{(.*?)}/);
                // parts[0] æ˜¯å‰æ®µ, parts[1] æ˜¯é—œéµå­—, parts[2] æ˜¯å¾Œæ®µ
                
                const strip = document.createElement('div');
                strip.className = 'sentence-strip';
                
                // çµ„åˆ HTML
                let htmlContent = `<div class="s-icon">${item.emoji}</div><div class="s-text">`;
                
                if (parts.length > 1) {
                    htmlContent += `${parts[0]}<span class="blank-space" onclick="revealWord(this, '${parts[1]}')">${parts[1]}</span>${parts[2]}`;
                } else {
                    htmlContent += item.sentence;
                }
                htmlContent += `</div>`;

                strip.innerHTML = htmlContent;
                
                // é»æ“Šæ•´æ¢ä¹Ÿç™¼éŸ³ï¼Œä½†ä¸å¹²æ“¾å¡«ç©º
                strip.onclick = (e) => {
                    if (!e.target.classList.contains('blank-space')) {
                        // æŠŠæ‹¬è™Ÿæ‹¿æ‰å†å¿µ
                        const cleanSentence = item.sentence.replace('{', '').replace('}', '');
                        speak(cleanSentence);
                    }
                };
                
                container.appendChild(strip);
            });
        }

        function revealWord(element, word) {
            element.classList.add('revealed');
            speak(word); // é»æ“Šåº•ç·šæ™‚åªå¿µå–®å­—
            event.stopPropagation(); // é˜²æ­¢è§¸ç™¼æ•´å¥æœ—è®€
        }

        // 3. éŠæˆ²æ¨¡å¼
        let currentGameItem = null;

        function renderGame() {
            const gamePanel = document.createElement('div');
            gamePanel.id = 'game-panel';
            
            gamePanel.innerHTML = `
                <div style="font-size:3rem; cursor:pointer; margin-bottom:20px;" onclick="playGameAudio()">ğŸ”Š</div>
                <div id="game-instruction">è½å¥å­ï¼Œé¸å‡ºæ­£ç¢ºçš„åœ–ç‰‡</div>
                <div class="options-grid" id="options-grid"></div>
                <div id="game-feedback" style="height:30px; margin-top:15px; font-weight:bold; font-size:1.2rem;"></div>
            `;
            
            container.appendChild(gamePanel);
            startNewRound();
        }

        function startNewRound() {
            const feedback = document.getElementById('game-feedback');
            feedback.innerText = '';
            
            // éš¨æ©Ÿé¸ä¸€é¡Œ
            currentGameItem = vocabList[Math.floor(Math.random() * vocabList.length)];
            
            // ç”¢ç”Ÿé¸é … (1å€‹æ­£ç¢º + 3å€‹éŒ¯èª¤)
            let options = [currentGameItem];
            while (options.length < 4) {
                let randomItem = vocabList[Math.floor(Math.random() * vocabList.length)];
                if (!options.includes(randomItem)) {
                    options.push(randomItem);
                }
            }
            
            // æ´—ç‰Œé¸é …
            options.sort(() => Math.random() - 0.5);
            
            // æ¸²æŸ“æŒ‰éˆ•
            const grid = document.getElementById('options-grid');
            grid.innerHTML = '';
            
            options.forEach(opt => {
                const btn = document.createElement('div');
                btn.className = 'option-btn';
                btn.innerText = opt.emoji;
                btn.onclick = () => checkAnswer(opt, btn);
                grid.appendChild(btn);
            });

            // è‡ªå‹•æ’­æ”¾é¡Œç›®
            setTimeout(playGameAudio, 500);
        }

        function playGameAudio() {
            if (currentGameItem) {
                // å¿µæ•´å¥å¥å­ (å»æ‰æ‹¬è™Ÿ)
                const sentence = currentGameItem.sentence.replace('{', '').replace('}', '');
                speak(sentence);
            }
        }

        function checkAnswer(selectedItem, btnElement) {
            const feedback = document.getElementById('game-feedback');
            
            if (selectedItem.id === currentGameItem.id) {
                // ç­”å°
                btnElement.classList.add('correct-anim');
                feedback.style.color = '#06d6a0';
                feedback.innerText = 'Excellent! ' + selectedItem.word;
                speak("Good job!");
                setTimeout(startNewRound, 2000);
            } else {
                // ç­”éŒ¯
                btnElement.classList.add('wrong-anim');
                feedback.style.color = '#ef476f';
                feedback.innerText = 'Try again!';
                speak("Try again");
            }
        }

        // åˆå§‹åŒ–
        window.onload = () => render();

    </script>
</body>
</html>
